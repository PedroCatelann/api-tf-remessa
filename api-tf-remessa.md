![](data:image/png;base64,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)

api-tf-remessa
==============

Aqui você descreve tudo sobre a sua aplicação  

Índice
------

* [Integrações](#integracoes)
  * [Sistemas](#sistemas)
* [Pré-requisitos: Globais](#preReqsGlobais)
* [Pré-requisitos: Serviços](#preReqsServicos)
* [Variáveis de Ambiente](#environments)

*** ** * ** ***

Integrações
-----------

### Sistemas:

|    Nome da aplicação    | Sigla | Descrição | Tipo(s) de comunicação | Opcional |
|-------------------------|-------|-----------|------------------------|----------|
| sistema-integracao-um   | S1    |           | Kafka                  | Não      |
| sistema-integracao-dois | S2    |           | REST, SOAP             | Sim      |

Pré-requisitos: Globais
-----------------------

* É necessário ter a tabela `TABELA_UM` criada e populada.
* É necessário ter a tabela `TABELA_DOIS` criada.  

Pré-requisitos: Serviços
------------------------

* /endpoint-um GET
  * Variaveis:
    * VARIAVEL_DO_GET

    <!-- -->

    * VARIAVEL_CONDICAO_DO_GET
  * Tabelas:
    * Para utilizar esse endpoint, é necessário ter a tabela `TABELA_DO_GET` criada e populada no banco.

    <!-- -->

    * Aqui você pode especificar tabelas que são necessárias para subir a API.
  * Sistemas:
    * SISTEMA_B
      * Serviços:
        * servicoGetB: Serviço que traz os valores necessários do SISTEMA_B para esta API.

        <!-- -->

        * nomeDoServiço: Descrição do serviço
      * Escopos:
        * S2_001_EXEMPLO_ESCOPO:POST
      * Condições:
        * Aqui você pode especificar algumas condições para que o endpoint funcione, por exemplo, ter um serviço de envio de SMS funcionando.

Variáveis de Ambiente
---------------------

As variáveis de ambiente que possuem um valor padrão (sem traço) não precisam ser informadas no deploy, exceto se o comportamento padrão da aplicação precise ser alterado para atender as demandas da instituição.  

- Será necessário atribuir um valor apenas aos campos que não apresentarem nenhum valor (exibido com traço na tabela abaixo no campo ARCH_OTLP_EXPORTER_URL).  

|                 Variável                  |                               Padrão                               |                                                                                               Descrição                                                                                                |
|-------------------------------------------|--------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| DEFAULT_CONTEXT_PATH                      | /                                                                  | Configuração do prefixo de todos os endpoints.                                                                                                                                                         |
| SERVER_PORT                               | 8080                                                               | Porta do servidor de aplicação.                                                                                                                                                                        |
| MANAGEMENT_CONTEXT_PATH                   | /                                                                  | Configuração do prefixo de todos os endpoints do management (usado para health check, metricas, infos, etc.).                                                                                          |
| MANAGEMENT_PORT                           | 9090                                                               | Porta do endpoint de management.                                                                                                                                                                       |
| HEALTH_LIVENESS                           | ping                                                               | Lista de indicadores para serem mostrados no liveness.                                                                                                                                                 |
| HEALTH_READINESS                          | ping,db                                                            | Lista de indicadores para serem mostrados no readiness.                                                                                                                                                |
| CORS_ALLOW_ORIGINS                        | \*                                                                 | Lista separa por vírgula de todas as origens permitidas, o wildcard (\*) pode ser utilizado para permitir todas.                                                                                       |
| CORS_ALLOW_METHODS                        | POST, PUT, GET, OPTIONS, HEAD, DELETE, CONNECT, TRACE, PATCH       | Lista separada por vírgula de todos os métodos HTTP permitidos.                                                                                                                                        |
| CORS_CACHE_MAX_AGE                        | 3600                                                               | Tempo total em segundos que será utilizado pelo navegador como cache dos headers relacionados ao CORS.                                                                                                 |
| CORS_ALLOW_HEADERS                        | Authorization, Content-Type, Accept, X-Requested-With, remember-me | Lista separada por vírgula de todos os headers permitidos.                                                                                                                                             |
| ARCH_APP_NAME                             | -                                                                  | Configura o nome da aplicação que será apresentada na ferramenta de telemetria.                                                                                                                        |
| ARCH_OTLP_EXPORTER_URL                    | -                                                                  | Configura a URL de envio de dados ao opentelemetry collector.                                                                                                                                          |
| ARCH_OTLP_AUTHENTICATION_HEADER           | api-key                                                            | Configura o nome do cabeçalho utilizado para enviar o token de autenticação.                                                                                                                           |
| ARCH_OTLP_EXPORTER_LOGGING_BRIDGE_ENABLED | false                                                              | Habilita ou desabilita a exportação dos traces para log, podendo ser definida como \`true\` ou \`false\`.                                                                                              |
| ARCH_OTLP_METRICS_EXPORTER_ENABLED        | false                                                              | Habilita a exportação de métricas usando OpenTelemetry (suportado apenas pelo newrelic).                                                                                                               |
| ARCH_MONITORING_EVENTS_EXPORTER_ENABLED   | false                                                              | Habilita a exportação de eventos usando OpenTelemetry (suportado apenas pelo newrelic).                                                                                                                |
| ARCH_MONITORING_TELEMETRY_PROVIDER        | opentelemetry                                                      | Configura o provedor de métricas utilizado. Valores possiveis: `(opentelemetry, newrelic)`                                                                                                             |
| ARCH_MONITORING_TELEMETRY_SAMPLE          | AlwaysOnSampler                                                    | Configura o Sampler utilizado para determinar a forma de vazão de traces suportado apenas pelo Opentelemetry. Valores possiveis: `(AlwaysOnSampler, AlwaysOffSampler, ParentBased, TraceIdRatioBased)` |
| ARCH_MONITORING_TELEMETRY_SAMPLE_ARGS     | 1                                                                  | Configura os argumentos passados ao Sampler, atualmente suporta apenas valores entre 0.0 e 1.0 (0 a 100%) e é utilizado apenas quando o tipo de Sampler for igual a TraceIdRatioBased.                 |
| SERVER_WORKER_THREADS                     | 64                                                                 | Quantidade de threads destinadas ao processamento de requisições http.                                                                                                                                 |

### Protegidas

|           Variável           | Padrão |                                 Descrição                                 |
|------------------------------|--------|---------------------------------------------------------------------------|
| ARCH_OTLP_AUTHENTICATION_KEY | -      | Configura o token de autenticação enviado na requisição para o collector. |
| NEW_RELIC_INSERT_KEY         | -      | Configura a chave de inserção do new relic.                               |

